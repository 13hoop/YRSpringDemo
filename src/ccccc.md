# AOP

虽然总有些拗口的名词其实大家都知道意思，但架不住约定俗成，所以有必要把一下概念提前说明：   
  - 切面：横切关注点的模块     
  - 切点：就是我们分散在各个业务中的功能   
虽然单独拿出来让我觉得很奇怪，因为这些实在是太常见了，立足于实例来说：在各种业务中，总是有 安全及权限管理，如果将其模块化，那么它就是一个切面，而每个具体业务中的调用就是 切点。

本质上，我们始终在代码层面就干一件事，即功能和代码的共用和组织而已。上述的安全部分的代码就是这样会被反复穿插到各个业务逻辑之中，而实现通用功能，我们OPP中的第一直觉就是__继承(inheritance)__和__委托(delegate)__，但是前者要求整个系统维系在一个基本的Base上，这往往会导致一个脆弱的对象体系；后者需要对委托对象进行复杂的调用。而切面(Aspect)则提供了另一种可选方案。这就是spring设计AOP的原因。
![](https://wx2.sinaimg.cn/mw690/006mou3Bly1g2jk29zmvuj312c0m80ya.jpg)
   
更具体一些的术语有:    
- 通知(Advice): 定义了具体的工作及工作的时机，涉及5类，分别是前置(Before),环绕(Around),返回(After-returning),后置(After)以及一个异常(After-throwing)   
- 连接点(join point): 应用执行过程中，任何可以被插入切面的一个点，通常就是方法调用或者跑出一个指导异常，设置是修改一个字段    
- 切点(pointcut): 选取的插入切面的一个或多个连接点，也即是指定"在哪里"匹配通知的地方，我们通常会通过明确的方法/类的名称或是利用正则来指定切点    
- 切面(Aspect): 是Advice和Pointcut的结合，包含完成功能所要求的一切，即何时何地怎样完成工作
- 引入(Introduction): 即就是向现有的类添加属性和方法    
- 织入(Weaving): 把切面应用到目标对象并创建你的代理对象的过程，通常选取织入的目标对象的生命周期有--编译期(需要特殊的编译器配合，比如AspectJ就是如此),类加载期(切面目标加载到JVM时，需要特殊的类加载器ClassLoader，一般于目标类增强其字节码)，以及运行时（如AOP动态的创建代理）





Spring 中的另一个重要组成就是 AOP，基本上有四种方式：     
- 基于代理的经典Spring AOP
- 纯POJO切面
- @AspectJ注解驱动的切面
- 注入式AspectJ切面

